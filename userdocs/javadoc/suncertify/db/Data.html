<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN""http://www.w3.org/TR/REC-html40/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Sun Aug 24 01:49:29 GMT-03:00 2003 -->
<TITLE>
Data
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">
</HEAD>
<SCRIPT>
function asd()
{
parent.document.title="Data";
}
</SCRIPT>
<BODY BGCOLOR="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../suncertify/util/CurrencyLong.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../suncertify/client/DataAccessFacade.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Data.html" TARGET="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;
<SCRIPT>
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
<A HREF="../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>
</NOSCRIPT>
</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
suncertify.db</FONT>
<BR>
Class  Data</H2>
<PRE>
java.lang.Object
  |
  +--<B>suncertify.db.Data</B>
</PRE>
<HR>
<DL>
<DT>public class <B>Data</B><DT>extends java.lang.Object</DL>

<P>
This class provides the basic database services. It uses two
 other support classes: DataInfo and FieldInfo.

 DECISION CHOICE:
 #1. We are modifying this class instead of extedening it. We are doing this
    to help on the composition. For example, it is used a helper class called
    suncertify.db.CriteriaFinder addresses request of the criteriaFinder
    method, in order, become easier chances on the algorithm of search,
    just being necessary the substituing of that class delegated.
 #2. The lock and unlock methods are left to its body empty, initialy,
    because the local connection ( NON-NETWORK MODE ) wont be handling access
    concurrent to datafile db.db. The thead-safer mechanish is done by the
    other class called suncertify.server.LockManager
 #3. In the instruction:  if ((values != null) && (values[0].equals(toMatch)))
     it is necessary remove all white spaces bby using the trim() method,
     otherwise the find method fails
  #4. It is necessary to do a bit modification in the algorithm of
      readRecord and writeRecord methods because the constructor
      String( byte[], int, int, int ) and the method
      getBytes( int, int, byte[], int) are deprectaded.
<P>

<P>
<DL>
<DT><B>Version:</B><DD>1.1 17-Nov-1997</DD>
, 1.2  18-Mar-2002</DD>
</DD>
<DT><B>Author:</B><DD>SUN Team modified by Francisco Carlos</DD>
</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.RandomAccessFile</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#db">db</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;representing a handle for random access the datafile</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#DELETED_RECORD">DELETED_RECORD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates the record was removed logically</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;suncertify.db.FieldInfo[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#description">description</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Containing informational about the structure of field in a record</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;suncertify.db.CriteriaFinder</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#finder">finder</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;helper class for attending request of search criteria</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#headerLen">headerLen</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates the size of the header for current database in bytes</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#LIVE_RECORD">LIVE_RECORD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates the record can be read</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#MAGIC">MAGIC</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Marker used for check if the database is not corrupted</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#recordCount">recordCount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# records in the database</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#recordLen">recordLen</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates the size of a record in bytes</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#UNEXPECTED">UNEXPECTED</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default message indicates unexpected database access problem</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#Data(java.lang.String)">Data</A></B>(java.lang.String&nbsp;dbname)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This constructor opens an existing database given the name
 of the disk file containing it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#Data(java.lang.String, suncertify.db.FieldInfo[])">Data</A></B>(java.lang.String&nbsp;dbname,
     suncertify.db.FieldInfo[]&nbsp;fields)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This constructor creates a new database file, using the name
 provided for the disk file and using the FieldInfo array to
 describe the field names and sizes that should be created.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#add(java.lang.String[])">add</A></B>(java.lang.String[]&nbsp;newData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method adds a new record to the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method closes the database, flushing any outstanding
 writes at the same time.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;suncertify.db.DataInfo[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#criteriaFind(java.lang.String)">criteriaFind</A></B>(java.lang.String&nbsp;criteria)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method searches the database throught the available records and
 returns an array of DataInfo objects describing all records found
 in the database which match the criteria supplied.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#delete(suncertify.db.DataInfo)">delete</A></B>(suncertify.db.DataInfo&nbsp;toDelete)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method deletes the record referred to by the record
 number in the DataInfo argument.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#finalize()">finalize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closes the datafile</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;suncertify.db.DataInfo</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#find(java.lang.String)">find</A></B>(java.lang.String&nbsp;toMatch)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method searches the database for an entry which has a first
 field which exactly matches the string supplied.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;suncertify.db.FieldInfo[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#getFieldInfo()">getFieldInfo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns a description of the database schema, as an
 array of FieldInfo objects.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;suncertify.db.DataInfo</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#getRecord(int)">getRecord</A></B>(int&nbsp;recNum)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets a requested record from the database based on record number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#getRecordCount()">getRecordCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of records stored in the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#invariant()">invariant</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensures that the database structure is valid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#lock(int)">lock</A></B>(int&nbsp;record)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lock the requested record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#modify(suncertify.db.DataInfo)">modify</A></B>(suncertify.db.DataInfo&nbsp;newData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method updates the record specified by the record number
 field in the DataInfo argument.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#readRecord()">readRecord</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reads a record from the current cursor position of the underlying random
 access file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#seek(int)">seek</A></B>(int&nbsp;recno)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Moves the current database record pointer to the specified record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#unlock(int)">unlock</A></B>(int&nbsp;record)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unlock the requested record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../suncertify/db/Data.html#writeRecord(java.lang.String[])">writeRecord</A></B>(java.lang.String[]&nbsp;newData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes a new record to the database using the current location of the
 underlying random access file.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="LIVE_RECORD"><!-- --></A><H3>
LIVE_RECORD</H3>
<PRE>
private static final byte <B>LIVE_RECORD</B></PRE>
<DL>
<DD>indicates the record can be read
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#suncertify.db.Data.LIVE_RECORD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="DELETED_RECORD"><!-- --></A><H3>
DELETED_RECORD</H3>
<PRE>
private static final byte <B>DELETED_RECORD</B></PRE>
<DL>
<DD>indicates the record was removed logically
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#suncertify.db.Data.DELETED_RECORD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="MAGIC"><!-- --></A><H3>
MAGIC</H3>
<PRE>
private static final int <B>MAGIC</B></PRE>
<DL>
<DD>Marker used for check if the database is not corrupted
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#suncertify.db.Data.MAGIC">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="UNEXPECTED"><!-- --></A><H3>
UNEXPECTED</H3>
<PRE>
private static final java.lang.String <B>UNEXPECTED</B></PRE>
<DL>
<DD>Default message indicates unexpected database access problem
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#suncertify.db.Data.UNEXPECTED">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="description"><!-- --></A><H3>
description</H3>
<PRE>
private suncertify.db.FieldInfo[] <B>description</B></PRE>
<DL>
<DD>Containing informational about the structure of field in a record
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="headerLen"><!-- --></A><H3>
headerLen</H3>
<PRE>
private int <B>headerLen</B></PRE>
<DL>
<DD>indicates the size of the header for current database in bytes
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="recordLen"><!-- --></A><H3>
recordLen</H3>
<PRE>
private int <B>recordLen</B></PRE>
<DL>
<DD>indicates the size of a record in bytes
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="recordCount"><!-- --></A><H3>
recordCount</H3>
<PRE>
private int <B>recordCount</B></PRE>
<DL>
<DD># records in the database
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="db"><!-- --></A><H3>
db</H3>
<PRE>
private java.io.RandomAccessFile <B>db</B></PRE>
<DL>
<DD>representing a handle for random access the datafile
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="finder"><!-- --></A><H3>
finder</H3>
<PRE>
private suncertify.db.CriteriaFinder <B>finder</B></PRE>
<DL>
<DD>helper class for attending request of search criteria
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="Data(java.lang.String)"><!-- --></A><H3>
Data</H3>
<PRE>
public <B>Data</B>(java.lang.String&nbsp;dbname)
     throws java.io.IOException</PRE>
<DL>
<DD>This constructor opens an existing database given the name
 of the disk file containing it.
<P>
<DT><B>Parameters:</B><DD><CODE>dbname</CODE> - A <code>String</code> indicates the name
               of the database file to open.
<DT><B>Throws:</B>
<DD><CODE><code>java.io.IOException</code></CODE>
<DD><CODE>java.io.IOException</CODE></DL>
<HR>

<A NAME="Data(java.lang.String, suncertify.db.FieldInfo[])"><!-- --></A><H3>
Data</H3>
<PRE>
public <B>Data</B>(java.lang.String&nbsp;dbname,
            suncertify.db.FieldInfo[]&nbsp;fields)
     throws java.io.IOException</PRE>
<DL>
<DD>This constructor creates a new database file, using the name
 provided for the disk file and using the FieldInfo array to
 describe the field names and sizes that should be created.
<P>
<DT><B>Parameters:</B><DD><CODE>dbname</CODE> - A <code>String</code> indicates the name of the
               database file to open.<DD><CODE>fields</CODE> - A <code>FieldInfo[]</code> indicates the list of fields
               for the schema of  this database.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Thrown if cannot create database file.</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getFieldInfo()"><!-- --></A><H3>
getFieldInfo</H3>
<PRE>
public suncertify.db.FieldInfo[] <B>getFieldInfo</B>()</PRE>
<DL>
<DD>This method returns a description of the database schema, as an
 array of FieldInfo objects.
<P>
<DD><DL>

<DT><B>Returns:</B><DD><code>FieldInfo[]</code> The array of FieldInfo objects
           that comprise the schema to this database.</DL>
</DD>
</DL>
<HR>

<A NAME="getRecordCount()"><!-- --></A><H3>
getRecordCount</H3>
<PRE>
public int <B>getRecordCount</B>()</PRE>
<DL>
<DD>Returns the number of records stored in the database.
<P>
<DD><DL>

<DT><B>Returns:</B><DD><code>int</code> indicates #records in the database</DL>
</DD>
</DL>
<HR>

<A NAME="getRecord(int)"><!-- --></A><H3>
getRecord</H3>
<PRE>
public suncertify.db.DataInfo <B>getRecord</B>(int&nbsp;recNum)
                                 throws <A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></PRE>
<DL>
<DD>Gets a requested record from the database based on record number.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recNum</CODE> - A <code>int</code> indicates the number of the record
               to read (first record is 1).
<DT><B>Returns:</B><DD><code>DataInfo</code> for the record or null if the record
          has been marked for deletion.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></CODE> - Thrown if database file cannot be accessed.</DL>
</DD>
</DL>
<HR>

<A NAME="find(java.lang.String)"><!-- --></A><H3>
find</H3>
<PRE>
public suncertify.db.DataInfo <B>find</B>(java.lang.String&nbsp;toMatch)
                            throws <A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></PRE>
<DL>
<DD>This method searches the database for an entry which has a first
 field which exactly matches the string supplied. If the required
 record cannot be found, this method returns null. For this
 assignment, the key field is the record number field.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>toMatch</CODE> - A <code>String</code> indicates the key field
                value to match upon for a successful find.
<DT><B>Returns:</B><DD><code>DataInfo</code> The matching record.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></CODE> - Thrown when database file could not be accessed.</DL>
</DD>
</DL>
<HR>

<A NAME="criteriaFind(java.lang.String)"><!-- --></A><H3>
criteriaFind</H3>
<PRE>
public suncertify.db.DataInfo[] <B>criteriaFind</B>(java.lang.String&nbsp;criteria)
                                      throws <A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></PRE>
<DL>
<DD>This method searches the database throught the available records and
 returns an array of DataInfo objects describing all records found
 in the database which match the criteria supplied.
 If record cannot be found, this method returns null.
 In the event of an invalid field name being privided as part of
 the criteria this method returns null
 This method implemenent a wildcard-like feature
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>criteria</CODE> - A <code>String</code> that indicates the search
                  criteria to match upon for a successful find.
<DT><B>Returns:</B><DD><code>DataInfo[]</code> an array of matching Record objects
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></CODE> - Thrown when database file could not be accessed.</DL>
</DD>
</DL>
<HR>

<A NAME="add(java.lang.String[])"><!-- --></A><H3>
add</H3>
<PRE>
public void <B>add</B>(java.lang.String[]&nbsp;newData)
         throws <A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></PRE>
<DL>
<DD>This method adds a new record to the database. The array of
 strings must have exactly the same number of elements as the
 field count of the database schema, otherwise a RuntimeException
 is issued. The first field, the key, must be unique in the
 database or a RuntimeException is thrown.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>newData</CODE> - A <code>String[]</code> indicates the elements
                of the record to add.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></CODE> - Attempted to add a duplicate key or
        database file could not be accessed.</DL>
</DD>
</DL>
<HR>

<A NAME="modify(suncertify.db.DataInfo)"><!-- --></A><H3>
modify</H3>
<PRE>
public void <B>modify</B>(suncertify.db.DataInfo&nbsp;newData)
            throws <A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></PRE>
<DL>
<DD>This method updates the record specified by the record number
 field in the DataInfo argument. The fields are all modified
 to reflect the values in that argument. If the key field
 specified in the argument matches any record other than the
 one indicated by the record number of the argument, then a
 RuntimeException is thrown.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>newData</CODE> - A <code>DataInfo</code> indicates
                the updated record to modify.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></CODE> - Thrown if attempting
                              to add a duplicate key.</DL>
</DD>
</DL>
<HR>

<A NAME="delete(suncertify.db.DataInfo)"><!-- --></A><H3>
delete</H3>
<PRE>
public void <B>delete</B>(suncertify.db.DataInfo&nbsp;toDelete)
            throws <A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></PRE>
<DL>
<DD>This method deletes the record referred to by the record
 number in the DataInfo argument.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>toDelete</CODE> - A <code>DataInfo</code> indicates the record to delete.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../suncertify/db/DatabaseException.html">DatabaseException</A></CODE> - Thrown if database cannot be accessed.</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD>This method closes the database, flushing any outstanding
 writes at the same time. Any attempt to access the
 database after this results in a IOException.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="finalize()"><!-- --></A><H3>
finalize</H3>
<PRE>
protected void <B>finalize</B>()</PRE>
<DL>
<DD>Closes the datafile
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>finalize</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="readRecord()"><!-- --></A><H3>
readRecord</H3>
<PRE>
private java.lang.String[] <B>readRecord</B>()
                               throws java.io.IOException</PRE>
<DL>
<DD>Reads a record from the current cursor position of the underlying random
 access file.
<P>
<DD><DL>

<DT><B>Returns:</B><DD><code>String[]</code> The array of strings that
                               make up a database record.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Generated if the RandomAccessFile cannot read from
                        the database file.</DL>
</DD>
</DL>
<HR>

<A NAME="writeRecord(java.lang.String[])"><!-- --></A><H3>
writeRecord</H3>
<PRE>
private void <B>writeRecord</B>(java.lang.String[]&nbsp;newData)
                  throws java.io.IOException</PRE>
<DL>
<DD>Writes a new record to the database using the current location of the
 underlying random access file.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>newData</CODE> - A <code>String[]</code> indicates an array of strings
                 in the database specified order.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Generated if the RandomAccessFile cannot write to
        the file or the wrong number of fields are specified.</DL>
</DD>
</DL>
<HR>

<A NAME="seek(int)"><!-- --></A><H3>
seek</H3>
<PRE>
private void <B>seek</B>(int&nbsp;recno)
           throws java.io.IOException</PRE>
<DL>
<DD>Moves the current database record pointer to the specified record.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recno</CODE> - A <code>int</code> indicates the record number
              to position the cursor.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If the record position is invalid.</DL>
</DD>
</DL>
<HR>

<A NAME="lock(int)"><!-- --></A><H3>
lock</H3>
<PRE>
public void <B>lock</B>(int&nbsp;record)</PRE>
<DL>
<DD>Lock the requested record. If the argument is -1, lock the whole
 database. This method blocks until the lock succeeds. No timeouts
 are defined for this.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>record</CODE> - A <code>int</code> indicates the record number to lock.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If the record position is invalid.</DL>
</DD>
</DL>
<HR>

<A NAME="unlock(int)"><!-- --></A><H3>
unlock</H3>
<PRE>
public void <B>unlock</B>(int&nbsp;record)</PRE>
<DL>
<DD>Unlock the requested record. Ignored if the caller does not have
 a current lock on the requested record.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>record</CODE> - A <code>int</code> indicates the record number to unlock.</DL>
</DD>
</DL>
<HR>

<A NAME="invariant()"><!-- --></A><H3>
invariant</H3>
<PRE>
protected final void <B>invariant</B>()</PRE>
<DL>
<DD>Ensures that the database structure is valid.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.RuntimeException</CODE> - If structure has become corrupted.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../suncertify/util/CurrencyLong.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../suncertify/client/DataAccessFacade.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Data.html" TARGET="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;
<SCRIPT>
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
<A HREF="../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>
</NOSCRIPT>
</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
